<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sirari</title>
    <link rel="icon" href="TU_URL_DEL_FAVICON.png" type="image/png">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>

    <section id="login-view" class="view hidden">
        <div class="login-container">
            <h1>SIRARI - Admin</h1>
            <form id="login-form">
                <input type="text" id="username" placeholder="Email (admin@sirari.com)" required>
                <input type="password" id="password" placeholder="Contraseña" required>
                <button type="submit">Ingresar</button>
            </form>
            <p id="login-error" class="error-msg"></p>
            <button id="go-to-store-btn" class="secondary-btn">Ir a la Tienda</button>
        </div>
    </section>

    <section id="admin-view" class="view hidden">
        <header class="admin-header">
            <h1>Panel de Administración</h1>
            <button id="admin-logout-btn">Cerrar Sesión</button>
        </header>
        
        <div class="admin-container">
            <section id="category-management-section">
                <h2>Gestionar Categorías</h2>
                <form id="category-form">
                    <input type="hidden" id="category-edit-id">
                    <div class="form-group category-form-inline">
                        <input type="text" id="category-name-input" placeholder="Nombre de la categoría" required>
                        <button type="submit" id="category-save-btn" class="primary-btn">Añadir</button>
                    </div>
                </form>
                <div id="category-list"></div>
            </section>
            <hr class="section-divider">
            <section id="product-management-section">
                <h2 id="admin-form-title">Añadir Nuevo Producto</h2>
                <form id="add-product-form">
                    <input type="hidden" id="product-edit-id">
                    <div class="form-group"><label>Título:</label><input type="text" id="product-title" required></div>
                    <div class="form-group"><label>Descripción:</label><textarea id="product-desc" required></textarea></div>
                    <div class="form-row">
                        <div class="form-group half-width"><label>Precio (Bs.):</label><input type="number" id="product-price" step="0.01" min="0" required></div>
                        <div class="form-group half-width"><label>Stock:</label><input type="number" id="product-stock" min="0" value="1" required></div>
                    </div>
                    <div class="form-group" style="background: #f9f9f9; padding: 15px; border-radius: 8px;">
                        <label>Oferta (Opcional):</label>
                        <div class="form-row">
                            <div class="form-group half-width">
                                <select id="discount-type">
                                    <option value="">Sin Oferta</option>
                                    <option value="percent">Porcentaje (%)</option>
                                    <option value="fixed">Monto Fijo (Bs)</option>
                                </select>
                            </div>
                            <div class="form-group half-width"><input type="number" id="discount-value" placeholder="Valor" min="0" step="0.01"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Imágenes (URLs):</label>
                        <div id="url-inputs-container"></div>
                        <button type="button" id="add-url-btn" class="secondary-btn small-btn">+ Agregar URL</button>
                    </div>
                    <div class="form-group"><label>Categoría:</label><select id="product-category" required></select></div>
                    <div class="admin-form-actions">
                        <button type="submit" id="save-product-btn" class="primary-btn">Guardar</button>
                        <button type="button" id="cancel-edit-btn" class="secondary-btn hidden">Cancelar</button>
                    </div>
                </form>
            </section>
            <hr class="section-divider">
            <section id="product-list-section">
                <h2>Lista de Productos</h2>
                <div id="admin-product-list"></div>
            </section>
        </div>
    </section>

    <section id="store-view" class="view">
        
        <header class="store-header">
            <h1 class="logo">SIRARI</h1>
            
            <div class="search-bar desktop-search">
                <input type="text" id="search-input" placeholder="Buscar por nombre o código...">
            </div>

            <div class="header-icons">
                <button id="about-us-btn" class="icon-btn desktop-only" title="Sobre Nosotros">
                    <i class="fas fa-info-circle"></i>
                </button>
                <button id="admin-login-btn" class="icon-btn"><i class="fas fa-user-shield"></i></button>
                <button id="cart-btn" class="icon-btn">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-count">0</span>
                </button>
                <button id="mobile-menu-btn" class="icon-btn mobile-only">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </header>

        <div id="mobile-sidebar" class="mobile-sidebar">
            <div class="sidebar-header">
                <h2>Menú</h2>
                <button id="close-sidebar-btn">&times;</button>
            </div>
            <div class="sidebar-content">
                <div class="search-bar mobile-search-container">
                    <input type="text" id="mobile-search-input" placeholder="Buscar...">
                </div>
                
                <a href="#footer-section" class="sidebar-link" id="mobile-about-link">Sobre Nosotros</a>
                
                <div class="sidebar-accordion">
                    <button id="mobile-cats-toggle" class="sidebar-link accordion-btn">
                        Categorías <i class="fas fa-chevron-down"></i>
                    </button>
                    <div id="mobile-cats-content" class="accordion-content">
                        </div>
                </div>
            </div>
        </div>
        <div id="sidebar-overlay" class="sidebar-overlay"></div>

        <nav id="category-filters"></nav>

        <main>
            <div id="product-grid" class="product-grid"></div>
            
            <div id="pagination-controls" class="pagination-container">
                </div>
        </main>

        <footer id="footer-section">
            <div class="footer-content">
                <div class="footer-left">
                    <h3>Sobre Nosotros</h3>
                    <p>En SIRARI Tienda Online nos dedicamos a ofrecerte los mejores productos con la mejor calidad y precio del mercado. Nuestra misión es brindarte una experiencia de compra segura, rápida y confiable desde la comodidad de tu hogar.</p>
                </div>
                <div class="footer-right">
                    <h4>Redes Sociales</h4>
                    <div class="social-icons">
                        <a href="https://facebook.com" target="_blank" class="social-link fb"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://instagram.com" target="_blank" class="social-link ig"><i class="fab fa-instagram"></i></a>
                        <a href="https://tiktok.com" target="_blank" class="social-link tk"><i class="fab fa-tiktok"></i></a>
                        <a href="https://twitter.com" target="_blank" class="social-link tw"><i class="fab fa-x-twitter"></i></a> <a href="https://wa.me/59173164833" target="_blank" class="social-link wa"><i class="fab fa-whatsapp"></i></a>
                        <a href="mailto:info@sirari.com" class="social-link em"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 SIRARI. Todos los derechos reservados.</p>
            </div>
        </footer>

        <div id="product-detail-modal" class="modal hidden">
            <div class="modal-content" id="product-detail-content"></div>
        </div>
        
        <div id="cart-modal" class="modal hidden">
            <div class="modal-content cart-modal-content">
                <button class="close-modal" id="close-cart-modal">×</button>
                <h2>Tu Carrito</h2>
                <div id="cart-items"></div>
                <hr>
                <div class="cart-total"><strong>Total: Bs. <span id="cart-total">0.00</span></strong></div>
                <button id="checkout-btn" class="primary-btn" disabled>Enviar Pedido</button>
            </div>
        </div>

        <div id="checkout-modal" class="modal hidden">
            <div class="modal-content">
                <button class="close-modal" id="close-checkout-modal">×</button>
                <h2>Datos de Envío</h2>
                <form id="checkout-form">
                    <div class="form-group"><label>Nombre Completo:</label><input type="text" id="customer-name" required></div>
                    <div class="form-group"><label>Referencia de Dirección:</label><textarea id="customer-location" rows="2" required></textarea></div>
                    <div id="location-question-step">
                        <p style="text-align:center; margin-bottom:10px;">¿Estás en el lugar de entrega?</p>
                        <div style="display:flex; gap:10px; justify-content:center;">
                            <button type="button" id="btn-yes-location" class="secondary-btn">SÍ</button>
                            <button type="button" id="btn-no-location" class="secondary-btn">NO</button>
                        </div>
                    </div>
                    <div id="map-container-wrapper" class="hidden">
                        <p style="font-size:0.9rem; color:#666;">Mueve el marcador a tu ubicación:</p>
                        <div id="delivery-map"></div>
                        <button type="button" id="confirm-map-location" class="primary-btn small-btn" style="width:100%; margin-top:10px;">Confirmar ubicación</button>
                    </div>
                    <p id="location-status" class="location-status-msg"></p>
                    <button type="submit" id="checkout-submit-btn" class="primary-btn hidden">Finalizar y Enviar WhatsApp</button>
                </form>
            </div>
        </div>
    </section>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>
